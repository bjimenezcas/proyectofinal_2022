var success_model,updated_model;function FileUpload(e){var s=e.response.uploaded,t=s.error,a=s.success,o=s.updated;success_model=s.success_model,updated_model=s.updated_model,LoopTableData(success_model,"success"),LoopTableData(updated_model,"updated"),$("#process_message").html('Se van a crear <span class="badge bg-success">'+a+'</span> registros, se van a actualizar <span class="badge bg-primary">'+o+'</span> registros y existen <span class="badge bg-danger">'+t+"</span> errores."),$("#form_process").show()}function LoopTableData(e,s){var t,a,o;if("success"==s?(t=$("#div_success_model"),o='<h4 class="text-center text-success"><div class="spinner-grow text-success" role="status"></div> Registros para crear</h4>'):"updated"==s&&(t=$("#div_updated_model"),o='<h4 class="text-center text-primary"><div class="spinner-grow text-primary" role="status"></div> Registros para actualizar</h4>'),e&&0!==e.length){a=o+'<table class="table"> <thead> <tr> <th scope="col">Usuario</th> <th scope="col">DNI</th> <th scope="col">Rol</th> <th scope="col">Código gestor</th> <th scope="col">Estado</th> <th scope="col">Inicial de agencia</th> <th scope="col">Fecha de baja</th> <th scope="col">F. creación</th> </tr></thead> <tbody>';for(const s of e)a+="<tr><td>"+s.code_large+"</td><td>"+s.dni+"</td><td>"+s.rol+"</td><td>"+s.code_short+"</td><td>"+s.status+"</td><td>"+s.agency+"</td><td>"+s.unsubscribed_date+"</td><td>"+s.created_at+"</td></tr>";a+="</tbody></table>"}t.html(a)}function LoadingButtonCsv(e){"show"==e?($("#ButtonSaveFileCsv").prop("disabled",!0),$("#ButtonSaveFileCsv").html('  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Cargando...')):"hide"==e&&$("#ButtonSaveFileCsv").html("Hecho")}function SaveFileUpload(){var e=$("#SelectSave").val();""!==e&&(LoadingButtonCsv("show"),$.ajax({url:"upload_save",type:"post",data:{selector:e,success_model:success_model,updated_model:updated_model},dataType:"json",success:function(e){LoadingButtonCsv("hide"),$("#process_message").append("<p>Proceso ejecutado correctamente</p>")},error:function(){alert("An error has occured while adding a new block.")}}))}